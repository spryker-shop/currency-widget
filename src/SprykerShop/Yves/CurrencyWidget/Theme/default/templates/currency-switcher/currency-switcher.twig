{% set currencies = currencies | default(_widget.currencies) %}
{% set currentCurrency = currentCurrency | default(_widget.currentCurrency) %}

{% if currencies is not empty %}
    <form method="GET" action="{{ path('currency-switch') }}" data-component="currency-switch">
        {% embed atom('select') with {
            modifiers: ['naked'],
            attributes: {
                name: 'currency-iso-code',
                onchange: 'this.form.submit()'
            },
            embed: {
                currencies: currencies,
                currentCurrency: currentCurrency
            }
        } only %}
            {% block options %}
                {% for currency in embed.currencies %}
                    <option value="{{ currency.code }}" {{ (currency.code == embed.currentCurrency) ? 'selected' : ''}}>{{ currency.name | trans }}</option>
                {% endfor %}
            {% endblock %}
        {% endembed %}

        <input type="hidden" name="referrer-url" value="{{ app.request.requestUri }}" />
    </form>
{% endif %}
